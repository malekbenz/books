!function(){"use strict";angular.module("app",["ngRoute","ngStorage"])}(),function(){"use strict";function o(o){o.when("/book/:id",{templateUrl:"views/book.html",controller:"controller.book",controllerAs:"vm"}).when("/:query/:page",{templateUrl:"views/main.html",controller:"controller.main as vm",controllerAs:"vm"}).when("/:query",{templateUrl:"views/main.html",controller:"controller.main as vm",controllerAs:"vm"}).when("/",{templateUrl:"views/main.html",controller:"controller.main as vm",controllerAs:"vm"}).otherwise({redirectTo:"/"})}angular.module("app").config(o),o.$inject=["$routeProvider"]}(),function(){function o(o,e){function t(e){var t=c+"/book/"+e;return o.get(t).then(r).catch(a)}function n(t,n){var l=c+"search/"+t+"/page/"+(n||1),s=e.getBooks(l);return s?Promise.resolve(s.data):o.get(l,{cache:!1}).then(r).catch(a)}function r(o){return e.saveBooks(o.config.url,o),o.data}function a(o){logger.error("XHR Failed ."+o.data)}var c="http://it-ebooks-api.info/v1/";return{getBooks:n,getBook:t}}angular.module("app").factory("dataservice",o),o.$inject=["$http","storage"]}(),function(){"use strict";function o(o){function e(e){return o[e]}function t(e,t){o[e]=t}function n(e){return o[e]}function r(e,t){o[e]=t}return{getBooks:n,getBook:e,saveBooks:r,saveBook:t}}angular.module("app").factory("storage",o),o.$inject=["$localStorage"]}(),function(){"use strict";function o(){}angular.module("app").factory("logger",o)}(),function(){"use strict";function o(){}angular.module("app").component("component.books",{templateUrl:"views/component.books.html",controller:o,controllerAs:"vm",bindings:{books:"<",pages:"<"}})}(),function(){"use strict";function o(){this.getpages=function(o,e){var t=[],n=10+10*Math.floor(o/10);n=n<e?n:e;var r=10*Math.floor(o/10);r=r>0?r-1:1;for(var a=r;a<=n;a++)t.push(a<10?"0"+a:a);return t}}angular.module("app").component("component.pagination",{restrict:"E",templateUrl:"views/component.pagination.html",controller:o,controllerAs:"vm",bindings:{total:"<",current:"<",query:"<"}})}(),function(){"use strict";function o(o,e){var t=this;o.getBook(e.id).then(function(o){t.book=o},function(o){console.log(o)})}angular.module("app").controller("controller.book",o),o.$inject=["dataservice","$routeParams"]}(),function(){"use strict";function o(o,e,t){function n(){t.path("/"+l.pages.query),l.showsearch=!1}function r(){l.books=[],l.pages.total=0,l.pages.current=e.page||1,l.pages.activePages=[],l.pages.query=e.query||"javascript",o.getBooks(l.pages.query,l.pages.current).then(a,c)}function a(o){l.books=o.Books,l.pages.total=Math.floor(o.Total/10)+1,l.pages.current=o.Page,l.pages.time=o.Time||0}function c(o){console.log(o)}var l=this;l.pages={},l.search=n,l.showsearch=!1,r(),l.tables=["1","2","3","4","5","6","7","8","9","10"]}angular.module("app").controller("controller.main",o),o.$inject=["dataservice","$routeParams","$location"]}(),function(){$('a[href="#search"]').on("click",function(o){o.preventDefault(),$("#search").addClass("open"),$("#query").focus().select()}),$("#search, #search button.close").on("click keyup",function(o){o.target!=this&&"close"!=o.target.className&&27!=o.keyCode||$(this).removeClass("open")})}();