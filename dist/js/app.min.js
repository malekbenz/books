!function(){"use strict";angular.module("app",["ngRoute","ngStorage"])}(),function(){"use strict";function o(o){o.when("/book/:id",{templateUrl:"views/book.html",controller:"controller.book",controllerAs:"vm"}).when("/:query/:page",{templateUrl:"views/main.html",controller:"controller.main as vm",controllerAs:"vm"}).when("/:query",{templateUrl:"views/main.html",controller:"controller.main as vm",controllerAs:"vm"}).when("/",{templateUrl:"views/main.html",controller:"controller.main as vm",controllerAs:"vm"}).otherwise({redirectTo:"/"})}angular.module("app").config(o),o.$inject=["$routeProvider"]}(),function(){function o(o,t){function e(t){var e=l+"/book/"+t;return o.get(e).then(r).catch(c)}function n(e,n){var r=l+"search/"+e+"/page/"+(n||1),i=t.getBooks(r);return i?Promise.resolve(i.data):o.get(r,{cache:!1}).then(a).catch(c)}function r(o){return o.data.Image=o.data.Image.replace("http","https"),console.log("Books :",o.data),t.saveBooks(o.config.url,o),o.data}function a(o){return angular.forEach(o.data.Books,function(o,t){o.Image=o.Image.replace("http","https")}),t.saveBooks(o.config.url,o),o.data}function c(o){logger.error("XHR Failed ."+o.data)}var l="https://it-ebooks-api.info/v1/";return{getBooks:n,getBook:e}}angular.module("app").factory("dataservice",o),o.$inject=["$http","storage"]}(),function(){"use strict";function o(o){function t(t){return o[t]}function e(t,e){o[t]=e}function n(t){return o[t]}function r(t,e){o[t]=e}return{getBooks:n,getBook:t,saveBooks:r,saveBook:e}}angular.module("app").factory("storage",o),o.$inject=["$localStorage"]}(),function(){"use strict";function o(){}angular.module("app").factory("logger",o)}(),function(){"use strict";function o(){}angular.module("app").component("component.books",{templateUrl:"views/component.books.html",controller:o,controllerAs:"vm",bindings:{books:"<",pages:"<"}})}(),function(){"use strict";function o(){this.getpages=function(o,t){var e=[],n=10+10*Math.floor(o/10);n=n<t?n:t;var r=10*Math.floor(o/10);r=r>0?r-1:1;for(var a=r;a<=n;a++)e.push(a<10?"0"+a:a);return e}}angular.module("app").component("component.pagination",{restrict:"E",templateUrl:"views/component.pagination.html",controller:o,controllerAs:"vm",bindings:{total:"<",current:"<",query:"<"}})}(),function(){"use strict";function o(o,t){var e=this;o.getBook(t.id).then(function(o){e.book=o},function(o){console.log(o)})}angular.module("app").controller("controller.book",o),o.$inject=["dataservice","$routeParams"]}(),function(){"use strict";function o(o,t,e){function n(){e.path("/"+l.pages.query),l.showsearch=!1}function r(){console.log("excute init function controller"),l.books=[],l.pages.total=0,l.pages.current=t.page||1,l.pages.activePages=[],l.pages.query=t.query||"javascript",o.getBooks(l.pages.query,l.pages.current).then(a,c)}function a(o){l.books=o.Books,l.pages.total=Math.floor(o.Total/10)+1,l.pages.current=o.Page,l.pages.time=o.Time||0}function c(o){console.log(o)}var l=this;console.log("Start controller.main"),l.pages={},l.search=n,l.showsearch=!1,r()}angular.module("app").controller("controller.main",o),o.$inject=["dataservice","$routeParams","$location"]}();